<!DOCTYPE html>
<html lang="en">
<head>
    <head>
        <meta charset="utf-8">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
      
        <title>NyumbArt-Enregistrement</title>
        <meta content="" name="description">
        <meta content="" name="keywords">
      
        <!-- Favicons -->
        <link href="assets/img/favicon.png" rel="icon">
        <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">
      
        <!-- Google Fonts -->
        <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">
      
        <!-- Vendor CSS Files -->
        <link href="assets/vendor/animate.css/animate.min.css" rel="stylesheet">
        <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
        <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
      
        <!-- Template Main CSS File -->
        <link href="assets/css/style.css" rel="stylesheet">
      
        <!-- =======================================================
        * Template Name: EstateAgency
        * Updated: Mar 10 2023 with Bootstrap v5.2.3
        * Template URL: https://bootstrapmade.com/real-estate-agency-bootstrap-template/
        * Author: BootstrapMade.com
        * License: https://bootstrapmade.com/license/
        ======================================================== -->
      </head>
</head>
<body>
    <section class="vh-100 bg-image"
  style="background-color: url('https://mdbcdn.b-cdn.net/img/Photos/new-templates/search-box/img4.webp');">
  <div class="mask d-flex align-items-center h-100 gradient-custom-3">
    <div class="container h-100">
      <div class="row d-flex justify-content-center align-items-center h-100">
        <div class="col-12 col-md-9 col-lg-7 col-xl-6">
          <div class="card" style="border-radius: 15px;">
            <div class="card-body p-5">
              <h2 class="text-uppercase text-center mb-5">Créer un compte</h2>

              <form>

                <div class="form-outline mb-4">
                  <input type="text" id="pseudo" class="form-control form-control-lg" />
                  <label class="form-label" for="pseudo">Votre Pseudo</label>
                </div>

                <div class="form-outline mb-4">
                  <input type="email" id="email" class="form-control form-control-lg" />
                  <label class="form-label" for="email">Votre Email</label>
                </div>

                <div class="form-outline mb-4">
                  <input type="password" id="txtPassword" class="form-control form-control-lg" />
                  <label class="form-label" for="txtPassword">Mot de passe</label>
                </div>

                <div class="d-flex justify-content-center">
                  <button id="btnSignup" type="button"
                    class="btn btn-success btn-block btn-lg gradient-custom-4 text-body">S'enregistrer</button>
                </div>

                <p class="text-center text-muted mt-5 mb-0">Vous avez déjà un compte? <a href="login.html"
                    class="fw-bold text-body"><u>Connetez-vous ici</u></a></p>

              </form>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
</body>
<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-auth.js";
  import { getDatabase, set, ref } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-database.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyDIokShQHeY-GkcFLSdhikHGNQGZddUbJQ",
    authDomain: "sincere-sun-365819.firebaseapp.com",
    databaseURL: "https://sincere-sun-365819-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "sincere-sun-365819",
    storageBucket: "sincere-sun-365819.appspot.com",
    messagingSenderId: "106854662718",
    appId: "1:106854662718:web:8551e81f7011c4e48e476f",
    measurementId: "G-3TE4VE0KB3"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth();
  const database = getDatabase(app);

  btnSignup.addEventListener('click', (e) => {

    var pseudo = document.getElementById("pseudo").value;
    var email = document.getElementById("email").value;
    var password = document.getElementById("txtPassword").value;

  createUserWithEmailAndPassword(auth, email, password)
  .then((userCredential) => {
    // Signed in 
    const user = userCredential.user;
    
    set(ref(database, 'users/' + user.uid), {
        pseudo: pseudo,
        email: email,
    });
    alert('Compte créé avec succès')
    window.location.replace("login.html");
    
    // ...
  })
  .catch((error) => {
    const errorCode = error.code;
    const errorMessage = error.message;

    alert('errorMessage')
    // ..
  });
  });
</script>
</html>